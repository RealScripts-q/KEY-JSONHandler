<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Key Validation</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f0f0f;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
}

.box {
  background: #161616;
  padding: 25px;
  width: 360px;
  border-radius: 10px;
  box-shadow: 0 0 25px rgba(0,0,0,0.6);
}

h2 {
  text-align: center;
  margin-bottom: 20px;
}

input {
  width: 100%;
  padding: 12px;
  border-radius: 6px;
  border: none;
  outline: none;
  background: #222;
  color: #fff;
  font-size: 14px;
}

button {
  width: 100%;
  margin-top: 12px;
  padding: 12px;
  border: none;
  border-radius: 6px;
  background: #0078ff;
  color: white;
  font-size: 15px;
  cursor: pointer;
}

button:disabled {
  background: #444;
  cursor: not-allowed;
}

.status {
  margin-top: 14px;
  text-align: center;
  font-size: 14px;
}
</style>
</head>

<body>

<div class="box">
  <h2>Key System</h2>

  <input id="keyInput" placeholder="Enter your key" />
  <button id="validateBtn">Validate Key</button>

  <div id="status" class="status"></div>
</div>

<script>
const BIN_URL = "https://api.jsonbin.io/v3/b/694c4aefae596e708faef157/latest";

const keyInput = document.getElementById("keyInput");
const statusEl = document.getElementById("status");
const btn = document.getElementById("validateBtn");

function setStatus(text, color) {
  statusEl.textContent = text;
  statusEl.style.color = color;
}

btn.onclick = async () => {
  const key = keyInput.value.trim();
  if (!key) return;

  btn.disabled = true;
  setStatus("Validatingâ€¦", "#aaa");

  try {
    const res = await fetch(BIN_URL);
    const data = await res.json();

    const keys = data.record.keys;

    if (!keys || !keys[key]) {
      setStatus("Invalid key", "#ff4c4c");
      btn.disabled = false;
      return;
    }

    // OPTIONAL EXPIRY CHECK
    const info = keys[key];
    if (info.expires && Date.now()/1000 > info.expires) {
      setStatus("Key expired", "#ff4c4c");
      btn.disabled = false;
      return;
    }

    setStatus("Key validated", "#4cff4c");

  } catch (e) {
    setStatus("Verification failed", "#ff4c4c");
  }

  btn.disabled = false;
};
</script>

</body>
</html>
